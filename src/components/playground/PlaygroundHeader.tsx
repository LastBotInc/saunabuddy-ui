import { Button } from "@/components/button/Button";
import { LoadingSVG } from "@/components/button/LoadingSVG";
import { PlaygroundDeviceSelector } from "@/components/playground/PlaygroundDeviceSelector";

import { useConfig } from "@/hooks/useConfig";
import { ConnectionState } from "livekit-client";
import { ReactNode } from "react";

type PlaygroundHeader = {
  logo?: ReactNode;
  title?: ReactNode;
  githubLink?: string;
  height: number;
  accentColor: string;
  connectionState: ConnectionState;
  onConnectClicked: () => void;
};

export const PlaygroundHeader = ({
  logo,
  title,
  githubLink,
  accentColor,
  height,
  onConnectClicked,
  connectionState,
}: PlaygroundHeader) => {
  const { config } = useConfig();
  return (
    <div
      className={`flex flex-col sm:flex-row gap-4 pt-4 text-${accentColor}-500 justify-between items-center shrink-0`}
      style={{
        minHeight: height + "px",
      }}
    >
      <div className="flex items-center gap-3 basis-1/4">
        <a href="https://saunabuddy.vercel.app">{logo ?? <LKLogo />}</a>
      </div>
      <div className="flex-grow text-center">
        <h1 className="text-2xl font-bold text-white">{title}</h1>
      </div>
      <div className="flex flex-col sm:flex-row basis-1/4 justify-end items-center gap-2">
        <div className="flex gap-2">
          <PlaygroundDeviceSelector kind='audiooutput' />
          <PlaygroundDeviceSelector kind='audioinput' />
        </div>
        <Button
          accentColor={
            connectionState === ConnectionState.Connected ? "red" : accentColor
          }
          disabled={connectionState === ConnectionState.Connecting}
          onClick={() => {
            onConnectClicked();
          }}
        >
          {connectionState === ConnectionState.Connecting ? (
            <LoadingSVG />
          ) : connectionState === ConnectionState.Connected ? (
            "Disconnect"
          ) : (
            "Connect"
          )}
        </Button>
      </div>
    </div>
  );
};

const LKLogo = () => (
  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
  width="80pt" height="80pt" viewBox="0 0 400.000000 200.000000"
  preserveAspectRatio="xMidYMid meet">
 <metadata>
 Created by potrace 1.10, written by Peter Selinger 2001-2011
 </metadata>
 <g transform="translate(0.000000,300.000000) scale(0.100000,-0.100000)"
 fill="#ffffff" stroke="none">
 <path d="M1485 2698 c-34 -20 -45 -36 -45 -67 0 -16 -11 -47 -25 -67 -38 -55
 -36 -99 4 -159 21 -30 27 -49 24 -76 -3 -31 1 -40 27 -63 17 -14 37 -26 44
 -26 23 0 68 42 82 76 21 49 17 72 -17 126 l-31 48 26 38 c35 51 34 98 -1 139
 -33 37 -60 47 -88 31z m64 -54 c29 -37 26 -58 -14 -103 -19 -21 -35 -44 -35
 -51 0 -7 16 -30 35 -51 38 -42 44 -78 23 -124 -14 -32 -54 -43 -75 -22 -12 11
 -12 19 -4 35 18 34 13 52 -24 93 -47 52 -46 86 2 140 32 36 35 43 24 61 -9 15
 -9 23 0 34 18 22 45 17 68 -12z"/>
 <path d="M805 2547 c-22 -22 -35 -47 -40 -74 -6 -37 -2 -51 26 -102 l33 -59
 -28 -41 c-48 -69 -44 -143 11 -193 56 -51 157 8 123 72 -9 17 -6 30 19 74 20
 33 31 67 31 91 0 40 -26 105 -42 105 -7 0 -8 20 -3 55 6 50 4 57 -19 80 -35
 35 -71 32 -111 -8z m91 -12 c18 -13 18 -15 2 -45 -24 -42 -23 -49 12 -92 51
 -62 48 -120 -9 -172 -24 -22 -28 -68 -6 -86 21 -17 1 -50 -30 -50 -33 0 -65
 44 -65 90 0 26 9 48 30 75 33 41 39 85 14 106 -50 42 -57 117 -15 160 34 33
 40 35 67 14z"/>
 <path d="M2085 2558 c-24 -19 -27 -26 -21 -65 5 -37 1 -52 -24 -97 -17 -29
 -30 -65 -30 -80 0 -29 32 -100 51 -111 6 -5 8 -25 5 -54 -7 -51 5 -74 45 -90
 42 -15 86 11 110 64 24 53 20 87 -17 140 -30 44 -30 64 -2 100 15 19 23 46 26
 84 3 47 0 60 -20 82 -26 29 -59 49 -81 49 -8 0 -27 -10 -42 -22z m71 -23 c28
 -19 48 -68 40 -98 -3 -13 -19 -41 -36 -62 -36 -46 -38 -74 -6 -104 51 -48 58
 -128 17 -165 -40 -36 -103 3 -68 42 24 26 22 36 -18 88 -26 34 -35 55 -35 84
 0 29 8 48 35 80 39 46 42 61 20 80 -20 17 -19 47 3 59 22 14 24 13 48 -4z"/>
 <path d="M1263 2185 c-35 -15 -93 -71 -93 -90 0 -19 -27 -38 -35 -25 -3 5 -15
 10 -26 10 -16 0 -167 -74 -279 -137 -19 -11 -68 -37 -107 -58 -57 -31 -75 -46
 -83 -70 -22 -70 5 -95 103 -95 l68 0 -20 -26 c-36 -45 -25 -159 16 -175 l24
 -9 -33 -29 c-30 -26 -31 -31 -20 -55 7 -15 12 -31 12 -36 0 -6 -42 -10 -95
 -10 -88 0 -98 -2 -120 -25 -14 -13 -25 -34 -25 -45 0 -22 35 -63 61 -72 12 -4
 12 -7 1 -21 -10 -11 -13 -57 -14 -165 0 -83 3 -159 6 -170 4 -11 23 -27 44
 -36 20 -8 30 -15 21 -15 -34 -2 -49 -35 -49 -108 0 -55 4 -76 20 -95 19 -25
 19 -25 -1 -44 -18 -17 -20 -28 -17 -96 2 -53 8 -82 19 -93 13 -14 48 -16 225
 -16 269 0 254 -1 254 11 0 6 -86 10 -237 10 l-238 0 0 90 0 90 222 0 223 0 0
 -55 c0 -62 25 -124 42 -107 7 7 25 1 56 -19 59 -37 140 -41 173 -8 l21 21 43
 -21 c23 -11 57 -21 76 -21 53 0 116 45 141 100 4 8 5 -3 2 -25 -4 -30 -2 -44
 9 -54 12 -9 92 -12 340 -12 178 0 331 3 339 6 25 10 34 46 30 116 -3 47 -9 73
 -22 87 -18 19 -18 20 1 35 13 11 20 31 21 59 3 101 1 116 -22 135 -20 17 -28
 39 -11 29 4 -3 19 4 32 15 23 20 24 26 25 177 1 123 -2 161 -13 173 -12 15
 -11 19 11 37 14 11 30 31 35 45 9 22 6 31 -15 57 -25 29 -29 30 -110 30 l-83
 0 6 33 c7 41 7 39 -1 60 -5 9 -14 17 -21 17 -8 0 -17 6 -21 13 -4 6 -4 9 1 5
 4 -4 17 5 29 19 30 40 30 147 -1 172 -21 18 -20 18 50 20 50 1 77 7 89 18 18
 16 24 69 10 88 -13 19 -65 51 -172 105 -58 30 -139 72 -180 95 -68 38 -140 65
 -140 51 0 -5 108 -64 340 -185 135 -70 135 -70 138 -108 l3 -38 -251 0 c-137
 0 -250 0 -250 0 0 0 7 18 15 40 16 46 20 220 5 259 -5 14 -16 26 -24 26 -7 0
 -19 13 -26 29 -15 38 -46 66 -92 86 -51 21 -407 21 -455 0z m464 -45 c57 -34
 68 -69 68 -210 0 -148 -13 -181 -85 -217 -41 -21 -58 -23 -221 -23 -164 0
 -179 2 -219 23 -68 36 -80 69 -80 215 0 136 7 161 60 206 l32 26 206 0 c188 0
 210 -2 239 -20z m-602 -207 c0 -76 4 -150 8 -164 l9 -27 -243 2 -242 3 0 37 0
 37 229 124 c126 68 231 124 234 125 3 0 5 -62 5 -137z m69 -208 c9 -14 35 -34
 58 -46 43 -22 42 -28 -11 -44 -21 -6 -23 -5 -19 13 9 32 -17 60 -59 64 -35 3
 -36 4 -19 21 23 23 31 22 50 -8z m650 6 c16 -18 16 -19 -23 -23 -46 -4 -45 -5
 -29 22 16 25 30 25 52 1z m-81 -53 c-10 -48 -10 -48 -43 -36 l-32 11 39 22
 c21 13 39 24 40 24 0 1 -1 -9 -4 -21z m437 -65 l0 -78 -148 5 -147 5 -44 48
 c-24 26 -55 50 -68 53 -13 4 -22 11 -20 18 2 7 70 13 213 16 115 3 210 7 212
 8 1 1 2 -33 2 -75z m-993 52 c2 -6 -12 -17 -32 -23 -19 -7 -50 -32 -70 -55
 l-36 -42 -135 -5 -134 -5 0 73 0 72 202 -2 c129 -2 203 -7 205 -13z m538 -74
 c87 -40 105 -82 105 -241 l0 -119 -36 24 c-33 23 -93 45 -120 45 -8 0 -10 15
 -7 43 4 32 1 48 -12 60 -39 40 -77 6 -74 -65 3 -48 3 -49 -40 -70 -44 -22 -97
 -83 -107 -125 -6 -21 -12 -23 -61 -23 l-54 0 2 138 c2 76 -1 143 -5 150 -4 7
 -15 12 -25 12 -36 0 -41 -20 -41 -167 0 -127 -2 -143 -17 -143 -30 0 -99 -48
 -126 -88 -15 -21 -33 -64 -39 -95 l-12 -57 -48 0 c-64 0 -88 25 -88 94 0 50 0
 51 90 139 l90 89 0 144 c0 155 6 178 53 222 48 45 87 51 317 51 188 1 220 -2
 255 -18z m286 -81 c66 0 109 -4 109 -10 0 -5 -5 -10 -11 -10 -5 0 -7 -4 -4
 -10 3 -5 22 -10 41 -10 32 0 34 -2 34 -35 0 -45 -17 -45 -53 0 -16 20 -32 33
 -36 31 -4 -3 -27 1 -52 7 -58 17 -79 12 -126 -28 l-39 -34 -10 59 -10 58 24
 -9 c13 -5 73 -9 133 -9z m-945 -12 c-3 -13 -6 -29 -6 -36 0 -7 -11 0 -24 15
 l-25 28 22 7 c36 10 40 9 33 -14z m-40 -44 c-3 -9 -6 -49 -6 -90 l0 -74 -75 0
 -75 0 0 35 c0 43 -40 90 -71 82 -16 -4 -19 0 -19 29 l0 34 126 0 c111 0 125
 -2 120 -16z m1009 -18 c39 -17 55 -42 55 -88 0 -49 -15 -58 -91 -58 -76 0 -91
 10 -91 65 0 41 15 63 57 81 37 16 30 16 70 0z m-1238 -126 l0 -30 -114 0 -113
 0 0 30 0 30 113 0 114 0 0 -30z m1573 0 l0 -30 -110 0 -110 0 0 30 0 30 110 0
 110 0 0 -30z m-1532 -60 c-40 -19 -43 -34 -43 -216 0 -125 2 -144 19 -163 24
 -26 38 -26 61 -1 l18 20 24 -22 c34 -32 15 -38 -104 -37 l-101 2 31 21 32 22
 3 164 c1 102 -1 167 -8 174 -16 16 -12 23 15 30 14 4 31 18 37 31 11 24 12 24
 30 8 18 -17 18 -17 -14 -33z m215 6 c-3 -16 -10 -23 -19 -19 -17 6 -18 25 -2
 41 16 16 26 6 21 -22z m850 16 c15 -17 15 -21 -8 -54 -14 -21 -25 -46 -25 -57
 0 -29 -13 -26 -33 8 -16 27 -16 29 3 46 10 9 22 30 25 46 8 34 16 36 38 11z
 m245 -17 c23 -14 30 -24 25 -35 -5 -8 -8 -63 -8 -122 0 -66 -4 -108 -10 -108
 -17 0 -75 39 -75 51 0 6 11 24 25 41 34 41 34 96 -1 137 -22 26 -24 34 -14 47
 7 8 16 13 19 12 3 -2 21 -12 39 -23z m-80 -48 c30 -28 30 -88 0 -117 -63 -59
 -158 -24 -158 58 0 38 24 71 60 85 25 9 73 -4 98 -26z m-1038 14 c0 -5 -32
 -37 -71 -72 -87 -77 -112 -122 -107 -193 3 -28 8 -59 12 -68 7 -15 3 -18 -18
 -18 l-25 0 0 180 1 180 104 0 c57 0 104 -4 104 -9z m687 -2 c15 -5 47 -29 71
 -52 35 -34 42 -48 42 -80 0 -29 -7 -46 -29 -68 -27 -27 -35 -29 -104 -29 -42
 0 -81 -2 -89 -5 -10 -4 -12 -50 -10 -231 2 -235 -4 -288 -37 -318 -51 -46
 -140 -34 -178 23 -22 33 -23 41 -23 245 1 267 12 303 101 343 33 14 39 22 39
 46 0 91 122 162 217 126z m-959 -179 l3 -170 -81 0 -80 0 0 170 0 170 78 0 78
 0 2 -170z m1582 0 l0 -170 -35 0 c-31 0 -35 3 -35 25 0 39 -27 83 -60 100
 l-29 15 0 100 0 100 79 0 80 0 0 -170z m-420 2 c0 -8 -57 -42 -69 -42 -4 0 -1
 23 8 51 l16 51 22 -27 c13 -14 23 -29 23 -33z m-510 28 c0 -5 -9 -14 -20 -20
 -11 -6 -20 -9 -20 -6 0 2 -3 11 -6 20 -5 12 0 16 20 16 14 0 26 -4 26 -10z
 m-87 -62 l-28 -41 -3 -238 c-3 -244 -4 -240 36 -323 8 -15 -113 1 -140 18 -44
 29 -48 53 -48 292 0 245 4 264 58 302 25 18 52 25 130 30 22 2 22 2 -5 -40z
 m767 -33 c0 -22 4 -25 33 -25 41 0 64 -17 73 -52 l6 -28 -207 0 c-185 0 -206
 2 -201 16 3 9 6 19 6 24 0 20 34 40 66 40 30 0 34 3 34 25 0 25 0 25 95 25 95
 0 95 0 95 -25z m-315 -32 c-16 -40 -17 -54 -2 -77 15 -22 15 -25 1 -30 -9 -3
 -34 -6 -57 -6 -23 0 -48 -7 -59 -16 -24 -22 -30 -6 -26 72 3 66 10 71 102 73
 42 1 47 -1 41 -16z m507 -105 c-5 -11 -82 -10 -82 1 0 5 7 14 15 21 8 7 15 18
 15 26 0 7 12 1 28 -14 15 -15 26 -30 24 -34z m-1187 -6 c-2 -9 -4 -19 -4 -21
 -1 -2 -8 2 -16 9 -12 10 -13 16 -4 26 14 17 28 9 24 -14z m-25 -109 l0 -88
 -223 0 -222 0 0 88 0 87 222 0 223 0 0 -87z m1250 0 l0 -88 -325 0 -325 0 0
 88 0 87 325 0 325 0 0 -87z m-1220 -113 c0 -23 -12 -31 -29 -21 -10 7 -11 13
 -2 30 14 24 31 19 31 -9z m564 -21 c-20 -22 -34 -16 -34 15 0 32 11 39 32 19
 17 -15 17 -18 2 -34z m656 -99 l0 -90 -345 0 -344 0 19 43 c11 23 20 63 20 89
 l0 46 325 1 325 2 0 -91z"/>
 <path d="M1317 2002 c-10 -10 -17 -28 -17 -40 0 -27 33 -62 58 -62 31 0 62 29
 62 59 0 54 -68 82 -103 43z"/>
 <path d="M1557 2002 c-10 -10 -17 -28 -17 -40 0 -28 34 -62 60 -62 27 0 60 35
 60 63 0 50 -70 76 -103 39z"/>
 <path d="M1382 1828 c9 -25 59 -53 97 -52 40 1 85 25 95 50 4 12 -12 14 -95
 14 -73 0 -100 -3 -97 -12z"/>
 <path d="M1582 1023 c-7 -3 -20 -19 -30 -36 -14 -27 -18 -70 -22 -279 -3 -165
 -2 -244 5 -237 6 6 12 112 15 255 l5 246 28 23 c36 31 36 43 -1 28z"/>
 </g>
 </svg>
);

const GithubSVG = () => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 98 96"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"
      fill="currentColor"
    />
  </svg>
);
